{"version":3,"sources":["webpack:///src/components/modal/modals/PlaceInfo.vue","webpack:///./src/components/modal/modals/PlaceInfo.vue?a32a","webpack:///./src/components/modal/modals/PlaceInfo.vue"],"names":["vue2_leaflet_min","Icon","Default","prototype","_getIconUrl","provider","lib","PlaceInfo","name","data","zoom","map","mapOptions","zoomControl","attributionControl","zoomSnap","url","icon","iconUrl","iconSize","iconAnchor","marker","computed","extends_default","Object","vuex_esm","methods","hideModal","updateModalData","initMap","this","$refs","mapObject","mounted","_ref","asyncToGenerator_default","regenerator_default","a","mark","_callee","_this","wrap","_context","prev","next","place","address","apollo","query","_index","variables","id","then","payload","catch","error","console","$toasted","search","city","result","setView","y","x","latLng","stop","apply","arguments","components","LMap","LTileLayer","LMarker","modals_PlaceInfo","render","_vm","_h","$createElement","_c","_self","staticClass","_v","_s","_e","ref","attrs","options","on","update:zoom","$event","lat-lng","type","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/8.41a31f22621711af274a.js","sourcesContent":["<template>\n  <div class=\"modal--pi\">\n    <div class=\"modal--pi__content\">\n      <div class=\"modal--pi__top\">\n        <div class=\"modal--pi__top__info\">\n          <div class=\"modal--pi__title\">\n            {{ data.place.name }}\n          </div>\n          <div\n            class=\"modal--pi__address\"\n            v-if=\"data.place.address\"\n          >\n            {{ data.place.address }}, {{ data.place.city }}\n          </div>\n        </div>\n        <div class=\"modal--pi__map\">\n          <l-map\n            ref=\"map\"\n            :zoom.sync=\"zoom\"\n            :options=\"mapOptions\"\n          >\n            <l-tile-layer :url=\"url\"/>\n            <l-marker\n              v-if=\"marker\"\n              :lat-lng=\"marker\"\n              :icon=\"icon\"\n            />\n          </l-map>\n        </div>\n      </div>\n      <button\n        class=\"modal__btn fullwidth modal__btn--grey\"\n        type=\"button\"\n        @click=\"hideModal\"\n      >Zamknij\n      </button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapActions, mapGetters } from 'vuex'\nimport { apolloClient } from '@/apollo'\nimport { PLACE_MORE_QUERY } from '@/graphql/queries/_index'\nimport { LMap, LTileLayer, LMarker, L } from 'vue2-leaflet'\n\nimport 'leaflet/dist/leaflet.css'\nimport { GeoSearchControl, OpenStreetMapProvider } from 'leaflet-geosearch'\n\nimport '../modal.scss'\n\ndelete L.Icon.Default.prototype._getIconUrl\n\nconst provider = new OpenStreetMapProvider()\n\nexport default {\n  name: 'PlaceInfo',\n  data: function () {\n    return {\n      zoom: 6,\n      map: null,\n      mapOptions: {\n        zoomControl: false,\n        attributionControl: false,\n        zoomSnap: true\n      },\n      url:\n          'https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png',\n      icon: L.icon({\n        iconUrl: 'static/leaflet/place-icon.png',\n        iconSize: [50, 50],\n        iconAnchor: [25, 25]\n      }),\n      marker: null\n    }\n  },\n  computed: {\n    ...mapGetters({\n      data: 'modal/data'\n    })\n  },\n  methods: {\n    ...mapActions({\n      hideModal: 'modal/hide',\n      updateModalData: 'modal/updateData'\n    }),\n    initMap: function () {\n      this.map = this.$refs.map.mapObject\n    }\n  },\n  mounted: async function () {\n    if (!this.data.place.address) {\n      await apolloClient\n        .query({\n          query: PLACE_MORE_QUERY,\n          variables: {\n            id: this.data.place.id\n          }\n        })\n        .then(data => data.data.place)\n        .then(place => {\n          const payload = {\n            place: {\n              ...this.data.place,\n              ...place\n            }\n          }\n          this.updateModalData(payload)\n        })\n        .catch(error => {\n          console.error(error)\n          this.$toasted.error(\n            'Wystąpił błąd podczas ładowania adresu gabinetu'\n          )\n        })\n    }\n\n    this.initMap()\n\n    provider\n      .search({query: `${this.data.place.address}, ${this.data.place.city}`})\n      .then(result => {\n        this.map = this.$refs.map.mapObject.setView(\n          [result[0].y, result[0].x],\n          16\n        )\n        this.marker = L.latLng(result[0].y, result[0].x)\n      })\n  },\n  components: {\n    LMap,\n    LTileLayer,\n    LMarker\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n  @import \"../../../main\";\n\n  .modal--pi {\n    &__content {\n      border-radius: 0.5em;\n      box-shadow: 0 0 20px 0px rgba(213, 213, 213, 0.3);\n      background: #fafafc;\n      overflow: hidden;\n    }\n\n    &__top {\n      display: flex;\n      flex-direction: column;\n\n      &__info {\n        display: flex;\n        flex-direction: column;\n        height: 100%;\n      }\n    }\n\n    &__title {\n      padding: 1rem;\n      width: calc(100% - 2rem);\n      color: #3e3e45;\n      font-weight: 700;\n      text-align: center;\n      background: #ececec;\n      font-size: 1.5rem;\n    }\n\n    &__address {\n      @extend %text--center;\n      padding: 1rem;\n      width: calc(100% - 2rem);\n      color: #67676e;\n      font-weight: 600;\n      background: #f5f5f5;\n      text-align: center;\n      height: 100%;\n    }\n\n    &__map {\n      width: 100%;\n      height: 10rem;\n    }\n\n    &__info {\n      padding: 1.5rem;\n\n      &__title {\n        font-size: 1.25rem;\n        font-weight: 600;\n        padding-bottom: 0.5rem;\n      }\n\n      &__el {\n        padding: 0.5rem 0;\n        display: flex;\n\n        i {\n          padding: 1rem;\n          border-radius: 0.5rem;\n          background: #ececec;\n        }\n\n        a {\n          margin-left: 1rem;\n          font-weight: 600;\n          padding: 1rem;\n          border-radius: 0.5rem;\n          background: #f5f5f5;\n          width: 100%;\n        }\n      }\n    }\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/modal/modals/PlaceInfo.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"modal--pi\"},[_c('div',{staticClass:\"modal--pi__content\"},[_c('div',{staticClass:\"modal--pi__top\"},[_c('div',{staticClass:\"modal--pi__top__info\"},[_c('div',{staticClass:\"modal--pi__title\"},[_vm._v(\"\\n          \"+_vm._s(_vm.data.place.name)+\"\\n        \")]),_vm._v(\" \"),(_vm.data.place.address)?_c('div',{staticClass:\"modal--pi__address\"},[_vm._v(\"\\n          \"+_vm._s(_vm.data.place.address)+\", \"+_vm._s(_vm.data.place.city)+\"\\n        \")]):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"modal--pi__map\"},[_c('l-map',{ref:\"map\",attrs:{\"zoom\":_vm.zoom,\"options\":_vm.mapOptions},on:{\"update:zoom\":function($event){_vm.zoom=$event}}},[_c('l-tile-layer',{attrs:{\"url\":_vm.url}}),_vm._v(\" \"),(_vm.marker)?_c('l-marker',{attrs:{\"lat-lng\":_vm.marker,\"icon\":_vm.icon}}):_vm._e()],1)],1)]),_vm._v(\" \"),_c('button',{staticClass:\"modal__btn fullwidth modal__btn--grey\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.hideModal}},[_vm._v(\"Zamknij\\n    \")])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-331a8ee6\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/modal/modals/PlaceInfo.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-331a8ee6\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./PlaceInfo.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./PlaceInfo.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./PlaceInfo.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-331a8ee6\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./PlaceInfo.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-331a8ee6\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/modal/modals/PlaceInfo.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}