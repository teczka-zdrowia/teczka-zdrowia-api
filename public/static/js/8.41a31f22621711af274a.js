webpackJsonp([8],{NGxq:function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("Xxa5"),o=e.n(n),i=e("exGp"),r=e.n(i),s=e("Dd8w"),l=e.n(s),c=e("NYxO"),d=e("zPxQ"),p=e("53V0"),u=e("MdIv"),m=(e("EYnv"),e("E+XS"));e("8M/P");delete u.L.Icon.Default.prototype._getIconUrl;var _=new m.OpenStreetMapProvider,f={name:"PlaceInfo",data:function(){return{zoom:6,map:null,mapOptions:{zoomControl:!1,attributionControl:!1,zoomSnap:!0},url:"https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png",icon:u.L.icon({iconUrl:"static/leaflet/place-icon.png",iconSize:[50,50],iconAnchor:[25,25]}),marker:null}},computed:l()({},Object(c.c)({data:"modal/data"})),methods:l()({},Object(c.b)({hideModal:"modal/hide",updateModalData:"modal/updateData"}),{initMap:function(){this.map=this.$refs.map.mapObject}}),mounted:function(){var a=r()(o.a.mark(function a(){var t=this;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(this.data.place.address){a.next=3;break}return a.next=3,d.a.query({query:p.p,variables:{id:this.data.place.id}}).then(function(a){return a.data.place}).then(function(a){var e={place:l()({},t.data.place,a)};t.updateModalData(e)}).catch(function(a){console.error(a),t.$toasted.error("Wystąpił błąd podczas ładowania adresu gabinetu")});case 3:this.initMap(),_.search({query:this.data.place.address+", "+this.data.place.city}).then(function(a){t.map=t.$refs.map.mapObject.setView([a[0].y,a[0].x],16),t.marker=u.L.latLng(a[0].y,a[0].x)});case 5:case"end":return a.stop()}},a,this)}));return function(){return a.apply(this,arguments)}}(),components:{LMap:u.LMap,LTileLayer:u.LTileLayer,LMarker:u.LMarker}},v={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"modal--pi"},[e("div",{staticClass:"modal--pi__content"},[e("div",{staticClass:"modal--pi__top"},[e("div",{staticClass:"modal--pi__top__info"},[e("div",{staticClass:"modal--pi__title"},[a._v("\n          "+a._s(a.data.place.name)+"\n        ")]),a._v(" "),a.data.place.address?e("div",{staticClass:"modal--pi__address"},[a._v("\n          "+a._s(a.data.place.address)+", "+a._s(a.data.place.city)+"\n        ")]):a._e()]),a._v(" "),e("div",{staticClass:"modal--pi__map"},[e("l-map",{ref:"map",attrs:{zoom:a.zoom,options:a.mapOptions},on:{"update:zoom":function(t){a.zoom=t}}},[e("l-tile-layer",{attrs:{url:a.url}}),a._v(" "),a.marker?e("l-marker",{attrs:{"lat-lng":a.marker,icon:a.icon}}):a._e()],1)],1)]),a._v(" "),e("button",{staticClass:"modal__btn fullwidth modal__btn--grey",attrs:{type:"button"},on:{click:a.hideModal}},[a._v("Zamknij\n    ")])])])},staticRenderFns:[]};var h=e("VU/8")(f,v,!1,function(a){e("gLN5")},"data-v-331a8ee6",null);t.default=h.exports},gLN5:function(a,t){}});
//# sourceMappingURL=8.41a31f22621711af274a.js.map