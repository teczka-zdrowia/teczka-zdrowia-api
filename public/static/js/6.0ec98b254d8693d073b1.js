webpackJsonp([6],{PaGr:function(t,e){},qFer:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Xxa5"),n=a.n(i),s=a("exGp"),r=a.n(s),o=a("Dd8w"),l=a.n(o),c=a("HYOs"),d=a("YVw1"),u=a("ctaT"),p=a("NYxO"),_=(a("8M/P"),a("mfxR")),f={name:"PatientInfo",data:function(){return{apiUrl:u.a,loading:{delete:!1,activate:!1,permission:!1}}},components:{MainSelect:c.a,MainBtn:d.a},computed:l()({},Object(p.c)({data:"modal/data",loggedInUser:"userInfo/full"}),{user:function(){return this.data.role.user},viewerIsUser:function(){return this.loggedInUser.id===this.user.id}}),methods:l()({},Object(p.b)({hideModal:"modal/hide",updatePatientRole:"placePatients/updateRole",deletePatientRole:"placePatients/deleteRole",updateEmployeeRole:"placeEmployees/updateRole",deleteEmployeeRole:"placeEmployees/deleteRole"}),{updateRole:function(){var t=r()(n.a.mark(function t(e){var a=this;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(void 0!==this.data.role.permission_type)){t.next=6;break}return t.next=4,this.updateEmployeeRole(e).then(function(){a.$toasted.success("Pomyślnie zaktualizowano pracownika")}).catch(function(t){return Object(_.a)(t)});case 4:t.next=8;break;case 6:return t.next=8,this.updatePatientRole(e).then(function(){a.$toasted.success("Pomyślnie zaktualizowano pacjenta")}).catch(function(t){return Object(_.a)(t)});case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),deleteRoleById:function(){var t=r()(n.a.mark(function t(e){var a=this;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(void 0!==this.data.role.permission_type)){t.next=6;break}return t.next=4,this.deleteEmployeeRole(e).then(function(){a.$toasted.success("Pomyślnie usunięto pracownika")}).catch(function(t){return Object(_.a)(t)});case 4:t.next=8;break;case 6:return t.next=8,this.deletePatientRole(e).then(function(){a.$toasted.success("Pomyślnie usunięto pacjenta")}).catch(function(t){return Object(_.a)(t)});case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),activateRole:function(){var t=r()(n.a.mark(function t(){var e;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e={id:this.data.role.id,data:{is_active:!0}},this.loading.activate=!0,t.next=4,this.updateRole(e);case 4:this.loading.activate=!1;case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),deactivateRole:function(){var t=r()(n.a.mark(function t(){var e;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e={id:this.data.role.id,data:{is_active:!1}},this.loading.activate=!0,t.next=4,this.updateRole(e);case 4:this.loading.activate=!1;case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),deleteRole:function(){var t=r()(n.a.mark(function t(){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading.delete=!0,t.next=3,this.deleteRoleById(this.data.role.id);case 3:this.loading.delete=!1,this.hideModal();case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),changePermissionType:function(){var t=r()(n.a.mark(function t(e){var a,i;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.target.value,i={id:this.data.role.id,data:{permission_type:a}},this.loading.permission=!0,t.next=5,this.updateRole(i);case 5:this.loading.permission=!1;case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()})},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal--ui"},[a("div",{staticClass:"modal--ui__content"},[a("div",{staticClass:"modal--ui__top"},[a("img",{staticClass:"modal--ui__img",attrs:{alt:t.user.name,src:t.user.avatar?t.apiUrl+"/storage/avatars/"+t.user.avatar:"/static/img/icons/avatar.png"}}),t._v(" "),a("div",{staticClass:"modal--ui__name"},[a("span",[t._v(t._s(t.user.name))])])]),t._v(" "),a("div",{staticClass:"modal--ui__info"},[a("div",{staticClass:"modal--ui__info__el"},[a("span",{staticClass:"fas fa-phone",attrs:{"aria-hidden":"true"}}),t._v(" "),a("a",{attrs:{href:"tel:"+t.user.phone}},[t._v(" "+t._s(t.user.phone))])]),t._v(" "),a("div",{staticClass:"modal--ui__info__el"},[a("span",{staticClass:"far fa-envelope",attrs:{"aria-hidden":"true"}}),t._v(" "),a("a",{attrs:{href:"mailto:"+t.user.email}},[t._v(" "+t._s(t.user.email))])]),t._v(" "),a("div",{staticClass:"modal--ui__info__el"},[a("span",{staticClass:"fas fa-map-marked",attrs:{"aria-hidden":"true"}}),t._v(" "),a("a",{attrs:{target:"_blank",href:"http://maps.google.com/?q= "+t.user.address}},[t._v("\n          "+t._s(t.user.address))])]),t._v(" "),a("div",{staticClass:"modal--ui__info__el"},[a("router-link",{attrs:{to:"/PatientFile/"+t.user.id},nativeOn:{click:function(e){return t.hideModal(e)}}},[a("span",{staticClass:"fas fa-file-medical",attrs:{"aria-hidden":"true"}}),t._v("\n          Kartkoteka\n        ")])],1),t._v(" "),t.data.role.permission_type&&!t.viewerIsUser?a("div",{staticClass:"modal__actions fullwidth modal--ui__info__el"},[a("MainSelect",{staticClass:"modal--ui__select",attrs:{disable:t.loading.permission},nativeOn:{change:function(e){return t.changePermissionType(e)}}},[a("option",{attrs:{value:"ADMIN"},domProps:{selected:"ADMIN"===t.data.role.permission_type}},[t._v("   Administrator\n          ")]),t._v(" "),a("option",{attrs:{value:"EMPLOYEE"},domProps:{selected:"EMPLOYEE"===t.data.role.permission_type}},[t._v("   Pracownik\n          ")])])],1):t._e()]),t._v(" "),t.data.role.permission_type&&!t.viewerIsUser?a("MainBtn",{staticClass:"modal__btn fullwidth modal__btn--red",attrs:{loading:t.loading.delete,disable:t.loading.delete,color:"#fafafa"},nativeOn:{click:function(e){return t.deleteRole(e)}}},[t._v("Usuń\n    ")]):t._e(),t._v(" "),!t.data.editAffiliation||t.data.role.is_active||t.viewerIsUser?t._e():a("MainBtn",{staticClass:"modal__btn fullwidth modal__btn--green",attrs:{loading:t.loading.activate,disable:t.loading.activate,color:"#fafafa"},nativeOn:{click:function(e){return t.activateRole(e)}}},[t._v("Aktywuj\n    ")]),t._v(" "),t.data.editAffiliation&&t.data.role.is_active&&!t.viewerIsUser?a("MainBtn",{staticClass:"modal__btn fullwidth modal__btn--violet",attrs:{loading:t.loading.activate,disable:t.loading.activate,color:"#fafafa"},nativeOn:{click:function(e){return t.deactivateRole(e)}}},[t._v("Dezaktywuj\n    ")]):t._e(),t._v(" "),a("MainBtn",{staticClass:"modal__btn fullwidth modal__btn--grey",attrs:{type:"button"},nativeOn:{click:function(e){return t.hideModal(e)}}},[t._v("Zamknij\n    ")])],1)])},staticRenderFns:[]};var h=a("VU/8")(f,v,!1,function(t){a("PaGr")},"data-v-3fafa9ee",null);e.default=h.exports}});
//# sourceMappingURL=6.0ec98b254d8693d073b1.js.map